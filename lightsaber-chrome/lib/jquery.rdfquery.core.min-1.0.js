(function(c){var d={},a=/^(([a-z][\-a-z0-9+\.]*):)?(\/\/([^\/?#]+))?([^?#]*)?(\?([^#]*))?(#(.*))?$/i,g,b=function(i){var h=i.match(a);if(h===null){throw"Malformed URI: "+i}return{scheme:h[1]?h[2].toLowerCase():undefined,authority:h[3]?h[4]:undefined,path:h[5]||"",query:h[6]?h[7]:undefined,fragment:h[8]?h[9]:undefined}},f=function(i){var j="",h=[];if(/\./.test(i)){while(i!==undefined&&i!==""){if(i==="."||i===".."){i=""}else{if(/^\.\.\//.test(i)){i=i.substring(3)}else{if(/^\.\//.test(i)){i=i.substring(2)}else{if(/^\/\.(\/|$)/.test(i)){i="/"+i.substring(3)}else{if(/^\/\.\.(\/|$)/.test(i)){i="/"+i.substring(4);j=j.replace(/\/?[^\/]+$/,"")}else{h=i.match(/^(\/?[^\/]*)(\/.*)?$/);i=h[2];j=j+h[1]}}}}}}return j}else{return i}},e=function(h,i){if(h.authority!==""&&(h.path===undefined||h.path==="")){return"/"+i}else{return h.path.replace(/[^\/]+$/,"")+i}};c.uri=function(j,i){var h;j=j||"";if(d[j]){return d[j]}i=i||c.uri.base();if(typeof i==="string"){i=c.uri.absolute(i)}h=new c.uri.fn.init(j,i);if(d[h]){return d[h]}else{d[h]=h;return h}};c.uri.fn=c.uri.prototype={scheme:undefined,authority:undefined,path:undefined,query:undefined,fragment:undefined,init:function(j,i){var h={};i=i||{};c.extend(this,b(j));if(this.scheme===undefined){this.scheme=i.scheme;if(this.authority!==undefined){this.path=f(this.path)}else{this.authority=i.authority;if(this.path===""){this.path=i.path;if(this.query===undefined){this.query=i.query}}else{if(!/^\//.test(this.path)){this.path=e(i,this.path)}this.path=f(this.path)}}}if(this.scheme===undefined){throw"Malformed URI: URI is not an absolute URI and no base supplied: "+j}return this},resolve:function(h){return c.uri(h,this)},relative:function(q){var n,o,m=0,k,l=[],h="";if(typeof q==="string"){q=c.uri(q,{})}if(q.scheme!==this.scheme||q.authority!==this.authority){return q.toString()}if(q.path!==this.path){n=q.path.split("/");o=this.path.split("/");if(n[1]!==o[1]){h=q.path}else{while(n[m]===o[m]){m+=1}k=m;for(;m<o.length-1;m+=1){l.push("..")}for(;k<n.length;k+=1){l.push(n[k])}h=l.join("/")}h=q.query===undefined?h:h+"?"+q.query;h=q.fragment===undefined?h:h+"#"+q.fragment;return h}if(q.query!==undefined&&q.query!==this.query){return"?"+q.query+(q.fragment===undefined?"":"#"+q.fragment)}if(q.fragment!==undefined&&q.fragment!==this.fragment){return"#"+q.fragment}return""},toString:function(){var h="";if(this._string){return this._string}else{h=this.scheme===undefined?h:(h+this.scheme+":");h=this.authority===undefined?h:(h+"//"+this.authority);h=h+this.path;h=this.query===undefined?h:(h+"?"+this.query);h=this.fragment===undefined?h:(h+"#"+this.fragment);this._string=h;return h}}};c.uri.fn.init.prototype=c.uri.fn;c.uri.absolute=function(h){return c.uri(h,{})};c.uri.resolve=function(i,h){return c.uri(i,h)};c.uri.relative=function(i,h){return c.uri(h,{}).relative(i)};c.uri.base=function(){return c(document).base()};c.fn.base=function(){var h=c(this).parents().andSelf().find("base").attr("href"),i=c(this)[0].ownerDocument||document,j=c.uri.absolute(i.location===null?document.location.href:i.location.href);return h===undefined?j:c.uri(h,j)}})(jQuery);(function(e){var a="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",c=/\sxmlns(?::([^ =]+))?\s*=\s*(?:"([^"]*)"|'([^']*)')/g,f="[-A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u10000-\uEFFFF.0-9\u00B7\u0300-\u036F\u203F-\u2040]",b="[\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0131\u0134-\u013E\u0141-\u0148\u014A-\u017E\u0180-\u01C3\u01CD-\u01F0\u01F4-\u01F5\u01FA-\u0217\u0250-\u02A8\u02BB-\u02C1\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03D6\u03DA\u03DC\u03DE\u03E0\u03E2-\u03F3\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E-\u0481\u0490-\u04C4\u04C7-\u04C8\u04CB-\u04CC\u04D0-\u04EB\u04EE-\u04F5\u04F8-\u04F9\u0531-\u0556\u0559\u0561-\u0586\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0641-\u064A\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D3\u06D5\u06E5-\u06E6\u0905-\u0939\u093D\u0958-\u0961\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8B\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AE0\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B36-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB5\u0BB7-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CDE\u0CE0-\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39\u0D60-\u0D61\u0E01-\u0E2E\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EAE\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0F40-\u0F47\u0F49-\u0F69\u10A0-\u10C5\u10D0-\u10F6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110B-\u110C\u110E-\u1112\u113C\u113E\u1140\u114C\u114E\u1150\u1154-\u1155\u1159\u115F-\u1161\u1163\u1165\u1167\u1169\u116D-\u116E\u1172-\u1173\u1175\u119E\u11A8\u11AB\u11AE-\u11AF\u11B7-\u11B8\u11BA\u11BC-\u11C2\u11EB\u11F0\u11F9\u1E00-\u1E9B\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2126\u212A-\u212B\u212E\u2180-\u2182\u3041-\u3094\u30A1-\u30FA\u3105-\u312C\uAC00-\uD7A3\u4E00-\u9FA5\u3007\u3021-\u3029_]",d=new RegExp("^"+b+f+"*$");e.fn.xmlns=function(m,j,n){var k=this.eq(0),r=k.data("xmlns"),o=k[0],s,h,l,q=m?"xmlns:"+m:"xmlns",t,w,u=false;if(j===undefined){if(m===undefined){if(!r){r={};if(o.attributes&&o.attributes.getNamedItemNS){for(l=0;l<o.attributes.length;l+=1){s=o.attributes[l];if(/^xmlns(:(.+))?$/.test(s.nodeName)){m=/^xmlns(:(.+))?$/.exec(s.nodeName)[2]||"";t=s.nodeValue;if(m===""||(t!==""&&t!==a&&t!==g&&d.test(m)&&m!=="xml"&&m!=="xmlns")){r[m]=e.uri(s.nodeValue);u=true}}}}else{w=/<[^>]+>/.exec(o.outerHTML);s=c.exec(w);while(s!==null){m=s[1]||"";t=s[2]||s[3];if(m===""||(t!==""&&t!==a&&t!==g&&d.test(m)&&m!=="xml"&&m!=="xmlns")){r[m]=e.uri(s[2]||s[3]);u=true}s=c.exec(w)}c.lastIndex=0}n=n||(o.parentNode.nodeType===1?k.parent().xmlns():{});r=u?e.extend({},n,r):n;k.data("xmlns",r)}return r}else{if(typeof m==="object"){for(h in m){if(typeof m[h]==="string"&&d.test(h)){this.xmlns(h,m[h])}}this.find("*").andSelf().removeData("xmlns");return this}else{if(!r){r=k.xmlns()}return r[m]}}}else{this.find("*").andSelf().removeData("xmlns");return this.attr(q,j)}};e.fn.removeXmlns=function(k){var h,l,j;if(typeof k==="object"){if(k.length===undefined){for(l in k){if(typeof k[l]==="string"){this.removeXmlns(l)}}}else{for(j=0;j<k.length;j+=1){this.removeXmlns(k[j])}}}else{h=k?"xmlns:"+k:"xmlns";this.removeAttr(h)}this.find("*").andSelf().removeData("xmlns");return this};e.fn.qname=function(i){var h,k,j;if(i===undefined){if(this[0].outerHTML===undefined){i=this[0].nodeName.toLowerCase()}else{i=/<([^ >]+)/.exec(this[0].outerHTML)[1].toLowerCase()}}if(i==="?xml:namespace"){throw"XMLinHTML: Unable to get the prefix to resolve the name of this element"}h=/^(([^:]+):)?([^:]+)$/.exec(i);k=h[2]||"";j=this.xmlns(k);if(j===undefined&&k!==""){throw"MalformedQName: The prefix "+k+" is not declared"}return{namespace:j,localPart:h[3],prefix:k,name:i}}})(jQuery);(function(b){var a=function(c){return c.replace(/[ \t\n\r]+/," ").replace(/^ +/,"").replace(/ +$/,"")};b.typedValue=function(d,c){return b.typedValue.fn.init(d,c)};b.typedValue.fn=b.typedValue.prototype={representation:undefined,value:undefined,datatype:undefined,init:function(e,c){var f=b.typedValue.types[c];if(b.typedValue.valid(e,c)){this.representation=e;this.datatype=c;this.value=f===undefined?a(e):f.value(f.strip?a(e):e);return this}else{throw {name:"InvalidValue",message:e+" is not a valid "+c+" value"}}}};b.typedValue.fn.init.prototype=b.typedValue.fn;b.typedValue.types={};b.typedValue.types["http://www.w3.org/2001/XMLSchema#string"]={regex:/^.*$/,strip:false,value:function(c){return c}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#token"]={regex:/^.*$/,strip:true,value:function(c){return a(c)}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#NCName"]={regex:/^[a-z_][-\.a-z0-9]+$/i,strip:true,value:function(c){return a(c)}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#boolean"]={regex:/^(?:true|false|1|0)$/,strip:true,value:function(c){return c==="true"||c==="1"}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#decimal"]={regex:/^[\-\+]?(?:[0-9]+\.[0-9]*|\.[0-9]+|[0-9]+)$/,strip:true,value:function(c){c=c.replace(/^0+/,"").replace(/0+$/,"");if(c===""){c="0.0"}if(c.substring(0,1)==="."){c="0"+c}if(/\.$/.test(c)){c=c+"0"}else{if(!/\./.test(c)){c=c+".0"}}return c}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#integer"]={regex:/^[\-\+]?[0-9]+$/,strip:true,value:function(c){return parseInt(c,10)}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#int"]={regex:/^[\-\+]?[0-9]+$/,strip:true,value:function(c){return parseInt(c,10)}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#float"]={regex:/^(?:[\-\+]?(?:[0-9]+\.[0-9]*|\.[0-9]+|[0-9]+)(?:[eE][\-\+]?[0-9]+)?|[\-\+]?INF|NaN)$/,strip:true,value:function(c){if(c==="-INF"){return -1/0}else{if(c==="INF"||c==="+INF"){return 1/0}else{return parseFloat(c)}}}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#double"]={regex:b.typedValue.types["http://www.w3.org/2001/XMLSchema#float"].regex,strip:true,value:b.typedValue.types["http://www.w3.org/2001/XMLSchema#float"].value};b.typedValue.types["http://www.w3.org/2001/XMLSchema#duration"]={regex:/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)?S)?)$/,validate:function(d){var c=this.regex.exec(d);return c[2]||c[3]||c[4]||c[5]||c[6]||c[7]},strip:true,value:function(c){return c}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#yearMonthDuration"]={regex:/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?$/,validate:function(d){var c=this.regex.exec(d);return c[2]||c[3]},strip:true,value:function(e){var d=this.regex.exec(e),f=d[2]||0,c=d[3]||0;c+=f*12;return d[1]==="-"?-1*c:c}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#dateTime"]={regex:/^(-?[0-9]{4,})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):(([0-9]{2})(\.([0-9]+))?)((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(d){var c=this.regex.exec(d),g=parseInt(c[1],10),i=c[10]===undefined||c[10]==="Z"?"+0000":c[10].replace(/:/,""),f;if(g===0||parseInt(i,10)<-1400||parseInt(i,10)>1400){return false}try{g=g<100?Math.abs(g)+1000:g;month=parseInt(c[2],10);day=parseInt(c[3],10);if(day>31){return false}else{if(day>30&&!(month===1||month===3||month===5||month===7||month===8||month===10||month===12)){return false}else{if(month===2){if(day>29){return false}else{if(day===29&&(g%4!==0||(g%100===0&&g%400!==0))){return false}}}}}f=""+g+"/"+c[2]+"/"+c[3]+" "+c[4]+":"+c[5]+":"+c[7]+" "+i;f=new Date(f);return true}catch(h){return false}},strip:true,value:function(c){return c}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#date"]={regex:/^(-?[0-9]{4,})-([0-9]{2})-([0-9]{2})((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(e){var c=this.regex.exec(e),f=parseInt(c[1],10),g=parseInt(c[2],10),d=parseInt(c[3],10),h=c[10]===undefined||c[10]==="Z"?"+0000":c[10].replace(/:/,"");if(f===0||g>12||d>31||parseInt(h,10)<-1400||parseInt(h,10)>1400){return false}else{return true}},strip:true,value:function(c){return c}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#gYear"]={regex:/^-?([0-9]{4,})$/,validate:function(c){var d=parseInt(c,10);return d!==0},strip:true,value:function(c){return parseInt(c,10)}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#gMonthDay"]={regex:/^--([0-9]{2})-([0-9]{2})((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(e){var c=this.regex.exec(e),f=parseInt(c[1],10),d=parseInt(c[2],10),g=c[3]===undefined||c[3]==="Z"?"+0000":c[3].replace(/:/,"");if(f>12||d>31||parseInt(g,10)<-1400||parseInt(g,10)>1400){return false}else{if(f===2&&d>29){return false}else{if((f===4||f===6||f===9||f===11)&&d>30){return false}else{return true}}}},strip:true,value:function(c){return c}};b.typedValue.types["http://www.w3.org/2001/XMLSchema#anyURI"]={regex:/^.*$/,strip:true,value:function(c,d){var e=b.extend({},b.typedValue.defaults,d);return b.uri.resolve(c,e.base)}};b.typedValue.defaults={base:b.uri.base(),namespaces:{}};b.typedValue.valid=function(e,c){var f=b.typedValue.types[c];if(f===undefined){return true}else{e=f.strip?a(e):e;if(f.regex.test(e)){return f.validate===undefined?true:f.validate(e)}else{return false}}}})(jQuery);(function(a){a.curie=function(f,c){var g=a.extend({},a.curie.defaults,c||{}),b=/^(([^:]*):)?(.+)$/.exec(f),h=b[2],d=b[3],e=g.namespaces[h];if(/^:.+/.test(f)){if(g.reservedNamespace===undefined||g.reservedNamespace===null){throw"Malformed CURIE: No prefix and no default namespace for unprefixed CURIE "+f}else{e=g.reservedNamespace}}else{if(h){if(e===undefined){throw"Malformed CURIE: No namespace binding for "+h+" in CURIE "+f}}else{if(g.charcase==="lower"){f=f.toLowerCase()}else{if(g.charcase==="upper"){f=f.toUpperCase()}}if(g.reserved.length&&a.inArray(f,g.reserved)>=0){e=g.reservedNamespace;d=f}else{if(g.defaultNamespace===undefined||g.defaultNamespace===null){throw"Malformed CURIE: No prefix and no default namespace for unprefixed CURIE "+f}else{e=g.defaultNamespace}}}}return a.uri(e+d)};a.curie.defaults={namespaces:{},reserved:[],reservedNamespace:undefined,defaultNamespace:undefined,charcase:"preserve"};a.safeCurie=function(d,c){var b=/^\[([^\]]+)\]$/.exec(d);return b?a.curie(b[1],c):a.uri(d)};a.createCurie=function(f,b){var e=a.extend({},a.curie.defaults,b||{}),d=e.namespaces,c;f=a.uri(f).toString();if(e.reservedNamespace!==undefined&&f.substring(0,e.reservedNamespace.toString().length)===e.reservedNamespace.toString()){c=f.substring(e.reservedNamespace.toString().length);if(a.inArray(c,e.reserved)===-1){c=":"+c}}else{a.each(d,function(h,g){if(f.substring(0,g.toString().length)===g.toString()){c=h+":"+f.substring(g.toString().length);return null}})}if(c===undefined){throw"No Namespace Binding: There's no appropriate namespace binding for generating a CURIE from "+f}else{return c}};a.fn.curie=function(c,b){var d=a.extend({},a.fn.curie.defaults,{namespaces:this.xmlns()},b||{});return a.curie(c,d)};a.fn.safeCurie=function(d,b){var c=a.extend({},a.fn.curie.defaults,{namespaces:this.xmlns()},b||{});return a.safeCurie(d,c)};a.fn.createCurie=function(d,b){var c=a.extend({},a.fn.curie.defaults,{namespaces:this.xmlns()},b||{});return a.createCurie(d,c)};a.fn.curie.defaults={reserved:["alternate","appendix","bookmark","cite","chapter","contents","copyright","first","glossary","help","icon","index","last","license","meta","next","p3pv1","prev","role","section","stylesheet","subsection","start","top","up"],reservedNamespace:"http://www.w3.org/1999/xhtml/vocab#",defaultNamespace:undefined,charcase:"lower"}})(jQuery);(function(D){var f={},c={},s={},C={},q={},h="http://www.w3.org/2001/XMLSchema#",u="http://www.w3.org/1999/02/22-rdf-syntax-ns#",t="http://www.w3.org/2000/01/rdf-schema#",y=/^<(([^>]|\\>)*)>$/,N=/^("""((\\"|[^"])*)"""|"((\\"|[^"])*)")(@([a-z]+(-[a-z0-9]+)*)|\^\^(.+))?$/,g=/(("""((\\"|[^"])*)""")|("(\\"|[^"]|)*")|(<(\\>|[^>])*>)|\S)+/g,w=databankSeed=new Date().getTime()%1000,i=function(){w+=1;return"b"+w.toString(16)},G=function(){databankSeed+=1;return"data"+databankSeed.toString(16)},H={},M={},j=function(Q,R){if(typeof Q==="string"){try{return D.rdf.resource(Q,R)}catch(T){try{return D.rdf.blank(Q,R)}catch(S){throw"Bad Triple: Subject "+Q+" is not a resource: "+S}}}else{return Q}},L=function(R,Q){if(R==="a"){return D.rdf.type}else{if(typeof R==="string"){try{return D.rdf.resource(R,Q)}catch(S){throw"Bad Triple: Property "+R+" is not a resource: "+S}}else{return R}}},I=function(Q,S){if(typeof Q==="string"){try{return D.rdf.resource(Q,S)}catch(U){try{return D.rdf.blank(Q,S)}catch(T){try{return D.rdf.literal(Q,S)}catch(R){throw"Bad Triple: Object "+Q+" is not a resource or a literal "+R}}}}else{return Q}},a=function(T,R,S){var Q;if(typeof R==="string"){Q=R.substring(1);if(S[Q]&&S[Q]!==T){return null}else{S[Q]=T;return S}}else{if(R===T){return S}else{return null}}},O=function(Q,R){if(Q.union===undefined){if(R.subject.type!==undefined){if(Q.subjectIndex[R.subject]===undefined){return[]}return D.map(Q.subjectIndex[R.subject],function(S){var T=R.exec(S);return T===null?null:{bindings:T,triples:[S]}})}else{if(R.object.type==="uri"||R.object.type==="bnode"){if(Q.objectIndex[R.object]===undefined){return[]}return D.map(Q.objectIndex[R.object],function(S){var T=R.exec(S);return T===null?null:{bindings:T,triples:[S]}})}else{if(R.property.type!==undefined){if(Q.propertyIndex[R.property]===undefined){return[]}return D.map(Q.propertyIndex[R.property],function(S){var T=R.exec(S);return T===null?null:{bindings:T,triples:[S]}})}}}}return D.map(Q.triples(),function(S){var T=R.exec(S);return T===null?null:{bindings:T,triples:[S]}})},o=function(Q,S,R){return D.map(Q,function(V,T){var U=D.map(S,function(Y){var X,W,Z=true;for(X in Y.bindings){W=Y.bindings[X];if(!(V.bindings[X]===undefined||V.bindings[X]===W)){Z=false;break}}return Z?Y:null});if(U.length>0){return D.map(U,function(W){return{bindings:D.extend({},V.bindings,W.bindings),triples:b(V.triples.concat(W.triples))}})}else{return R?V:null}})},P=function(Q,S){var R,T,U;if(S.filterExp!==undefined&&!D.isFunction(S.filterExp)){if(Q.union===undefined){R=typeof S.filterExp.subject==="string"?"":S.filterExp.subject;T=typeof S.filterExp.property==="string"?"":S.filterExp.property;U=typeof S.filterExp.object==="string"?"":S.filterExp.object;if(Q.queries[R]===undefined){Q.queries[R]={}}if(Q.queries[R][T]===undefined){Q.queries[R][T]={}}if(Q.queries[R][T][U]===undefined){Q.queries[R][T][U]=[]}Q.queries[R][T][U].push(S)}else{D.each(Q.union,function(W,V){P(V,S)})}}},z=function(Q){Q.length=0;Q.matches=[];D.each(Q.children,function(R,S){z(S)});D.each(Q.partOf,function(R,S){z(S)})},E=function(R,Q){if(Q.length>0){D.each(R.children,function(S,T){F(T,Q)});D.each(R.partOf,function(S,T){E(T,Q)});D.each(Q,function(T,S){R.matches.push(S);Array.prototype.push.call(R,S.bindings)})}},m=function(Z,ac){var X,R,ad,W,V,U,ab,Q=ac.length,T,Y={},S={},ae={},aa=[];for(X=0;X<Z.length;X+=1){R=Z[X].bindings;ad=Z[X].triples;S=ae;for(W=0;W<Q;W+=1){U=ac[W];ab=R[U];if(W===Q-1){if(S[ab]===undefined){Y={bindings:{},triples:ad};for(V=0;V<Q;V+=1){Y.bindings[ac[V]]=R[ac[V]]}S[ab]=Y;aa.push(Y)}else{Y=S[ab];Y.triples=Y.triples.concat(ad)}}else{if(S[ab]===undefined){S[ab]={}}S=S[ab]}}}return aa},J=function(W,Q){var U,R,T,V={},S=[];for(U=0;U<W.length;U+=1){R=W[U];if(V[R.bindings[Q]]===undefined){T={bindings:{node:R.bindings[Q]},triples:R.triples};S.push(T);V[R.bindings[Q]]=T}else{T=V[R.bindings[Q]];T.triples=T.triples.concat(R.triples)}}return S},F=function(S,R){var Q;if(S.union===undefined){if(S.top||S.parent.top){Q=S.alphaMemory}else{R=R||S.parent.matches;if(D.isFunction(S.filterExp)){Q=D.map(R,function(T,U){return S.filterExp.call(T.bindings,U,T.bindings,T.triples)?T:null})}else{if(S.filterExp!==undefined){Q=o(R,S.alphaMemory,S.filterExp.optional)}else{Q=R}}}}else{Q=D.map(S.union,function(T){return T.matches})}if(S.selections!==undefined){Q=m(Q,S.selections)}else{if(S.navigate!==undefined){Q=J(Q,S.navigate)}}E(S,Q)},n=function(S,R){var Q;if(S.filterExp.optional){z(S);F(S)}else{if(S.top||S.parent.top){Q=[R]}else{Q=o(S.parent.matches,[R],false)}E(S,Q)}},K=function(R,S){var Q,T=R.filterExp.exec(S);if(T!==null){Q={triples:[S],bindings:T};R.alphaMemory.push(Q);n(R,Q)}},d=function(Q,R){Q.alphaMemory.splice(D.inArray(R,Q.alphaMemory),1);z(Q);F(Q)},B=function(Q,R){D.each(Q,function(S,T){K(T,R)})},l=function(Q,R){D.each(Q,function(S,T){d(T,R)})},e=function(Q,U){var R=U.subject,S=U.property,T=U.object;if(Q.union===undefined){if(Q.queries[R]!==undefined){if(Q.queries[R][S]!==undefined){if(Q.queries[R][S][T]!==undefined){B(Q.queries[R][S][T],U)}if(Q.queries[R][S][""]!==undefined){B(Q.queries[R][S][""],U)}}if(Q.queries[R][""]!==undefined){if(Q.queries[R][""][T]!==undefined){B(Q.queries[R][""][T],U)}if(Q.queries[R][""][""]!==undefined){B(Q.queries[R][""][""],U)}}}if(Q.queries[""]!==undefined){if(Q.queries[""][S]!==undefined){if(Q.queries[""][S][T]!==undefined){B(Q.queries[""][S][T],U)}if(Q.queries[""][S][""]!==undefined){B(Q.queries[""][S][""],U)}}if(Q.queries[""][""]!==undefined){if(Q.queries[""][""][T]!==undefined){B(Q.queries[""][""][T],U)}if(Q.queries[""][""][""]!==undefined){B(Q.queries[""][""][""],U)}}}}else{D.each(Q.union,function(W,V){e(V,U)})}},r=function(Q,U){var R=U.subject,S=U.property,T=U.object;if(Q.union===undefined){if(Q.queries[R]!==undefined){if(Q.queries[R][S]!==undefined){if(Q.queries[R][S][T]!==undefined){l(Q.queries[R][S][T],U)}if(Q.queries[R][S][""]!==undefined){l(Q.queries[R][S][""],U)}}if(Q.queries[R][""]!==undefined){if(Q.queries[R][""][T]!==undefined){l(Q.queries[R][""][T],U)}if(Q.queries[R][""][""]!==undefined){l(Q.queries[R][""][""],U)}}}if(Q.queries[""]!==undefined){if(Q.queries[""][S]!==undefined){if(Q.queries[""][S][T]!==undefined){l(Q.queries[""][S][T],U)}if(Q.queries[""][S][""]!==undefined){l(Q.queries[""][S][""],U)}}if(Q.queries[""][""]!==undefined){if(Q.queries[""][""][T]!==undefined){l(Q.queries[""][""][T],U)}if(Q.queries[""][""][""]!==undefined){l(Q.queries[""][""][""],U)}}}}else{D.each(Q.union,function(W,V){r(V,U)})}},x=function(X,W,U){var Q=W[0],T={},S=[],R,V;U=U||{};if(W.length===0){for(R=0;R<X.length;R+=1){for(v in X[R]){if(U[v]===undefined){U[v]=[]}if(D.isArray(U[v])){U[v].push(X[R][v])}}}return[U]}for(R=0;R<X.length;R+=1){key=X[R][Q];if(T[key]===undefined){T[key]=[]}T[key].push(X[R])}W=W.splice(1,1);for(v in T){V=D.extend({},U);V[Q]=T[v][0][Q];S=S.concat(x(T[v],W,V))}return S},k=function(Q,R,S){if(M[Q.id]===undefined){M[Q.id]={}}if(M[Q.id][R]===undefined){M[Q.id][R]=S;return false}return true},A=function(R,T,Q,S){var U=M[R.id][T];if(D.isFunction(U[Q])){U[Q].call(R,S)}M[R.id][T]=undefined},b=function(Q){var S=[];var R=Q.length;for(var U=0;U<R;U++){for(var T=U+1;T<R;T++){if(Q[U]===Q[T]){T=++U}}S.push(Q[U])}return S};D.typedValue.types["http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"]={regex:/^.*$/m,strip:false,value:function(Q){return Q}};D.rdf=function(Q){return new D.rdf.fn.init(Q)};D.rdf.fn=D.rdf.prototype={rdfquery:"1.1",init:function(Q){var S,R;Q=Q||{};this.parent=Q.parent;this.union=Q.union;this.top=this.parent===undefined&&this.union===undefined;if(this.union===undefined){if(Q.databank===undefined){this.databank=this.parent===undefined?D.rdf.databank(Q.triples,Q):this.parent.databank}else{this.databank=Q.databank}}else{S=D.map(this.union,function(T){return T.databank});S=b(S);if(S[1]!==undefined){this.databank=D.rdf.databank(undefined,{union:S})}else{this.databank=S[0]}}this.children=[];this.partOf=[];this.filterExp=Q.filter;this.selections=Q.distinct;this.navigate=Q.navigate;this.alphaMemory=[];this.matches=[];this.length=0;if(this.filterExp!==undefined){if(!D.isFunction(this.filterExp)){P(this.databank,this);this.alphaMemory=O(this.databank,this.filterExp)}}else{if(Q.nodes!==undefined){this.alphaMemory=[];for(R=0;R<Q.nodes.length;R+=1){this.alphaMemory.push({bindings:{node:Q.nodes[R]},triples:[]})}}}F(this);return this},base:function(Q){if(Q===undefined){return this.databank.base()}else{this.databank.base(Q);return this}},prefix:function(R,Q){if(Q===undefined){return this.databank.prefix(R)}else{this.databank.prefix(R,Q);return this}},add:function(T,R){var S,Q;if(T.rdfquery!==undefined){if(T.top){Q=this.databank.add(T.databank);S=D.rdf({parent:this.parent,databank:Q});return S}else{if(this.top){Q=T.databank.add(this.databank);S=D.rdf({parent:T.parent,databank:Q});return S}else{if(this.union===undefined){S=D.rdf({union:[this,T]});this.partOf.push(S);T.partOf.push(S);return S}else{this.union.push(T);T.partOf.push(this)}}}}else{if(typeof T==="string"){R=D.extend({},{base:this.base(),namespaces:this.prefix(),source:T},R);T=D.rdf.pattern(T,R)}if(T.isFixed()){this.databank.add(T.triple(),R)}else{S=this;this.each(function(V,W){var U=T.triple(W);if(U!==null){S.databank.add(U,R)}})}}return this},remove:function(R,Q){if(typeof R==="string"){Q=D.extend({},{base:this.base(),namespaces:this.prefix()},Q);R=D.rdf.pattern(R,Q)}if(R.isFixed()){this.databank.remove(R.triple(),Q)}else{query=this;this.each(function(T,U){var S=R.triple(U);if(S!==null){query.databank.remove(S,Q)}})}return this},load:function(S,Q){var R=this,Q=Q||{},T=Q.success;if(T!==undefined){Q.success=function(){T.call(R)}}this.databank.load(S,Q);return this},except:function(Q){return D.rdf({databank:this.databank.except(Q.databank)})},where:function(S,R){var V,U,T,Q;R=R||{};if(typeof S==="string"){U=R.base||this.base();T=D.extend({},this.prefix(),R.namespaces||{});Q=R.optional||false;S=D.rdf.pattern(S,{namespaces:T,base:U,optional:Q})}V=D.rdf(D.extend({},R,{parent:this,filter:S}));this.children.push(V);return V},optional:function(R,Q){return this.where(R,D.extend({},Q||{},{optional:true}))},about:function(R,Q){return this.where(R+" ?property ?value",Q)},filter:function(S,T){var Q,R;if(typeof S==="string"){if(T.constructor===RegExp){Q=function(){return T.test(this[S].value)}}else{Q=function(){return this[S].type==="literal"?this[S].value===T:this[S]===T}}}else{Q=S}R=D.rdf({parent:this,filter:Q});this.children.push(R);return R},node:function(S){var Q,R;if(S.toString().substring(0,1)==="?"){Q=S.toString().substring(1);R=D.rdf({parent:this,navigate:Q})}else{if(typeof S==="string"){S=I(S,{namespaces:this.prefix(),base:this.base()})}R=D.rdf({parent:this,nodes:[S]})}this.children.push(R);return R},find:function(Q){return this.where("?node "+Q+" ?object",{navigate:"object"})},back:function(Q){return this.where("?subject "+Q+" ?node",{navigate:"subject"})},group:function(V){var U={},T=[],S,R,Q;if(!D.isArray(V)){V=[V]}return D(x(this,V))},select:function(T){var S=[],R,Q;for(R=0;R<this.length;R+=1){if(T===undefined){S[R]=this[R]}else{S[R]={};for(Q=0;Q<T.length;Q+=1){S[R][T[Q]]=this[R][T[Q]]}}}return S},describe:function(U){var R,Q,T,S=[];for(R=0;R<U.length;R+=1){T=U[R];if(T.substring(0,1)==="?"){T=T.substring(1);for(Q=0;Q<this.length;Q+=1){S.push(this[Q][T])}}else{S.push(T)}}return this.databank.describe(S)},eq:function(Q){return this.filter(function(R){return R===Q})},reset:function(){var Q=this;while(Q.parent!==undefined){Q=Q.parent}return Q},end:function(){return this.parent},size:function(){return this.length},sources:function(){return D(D.map(this.matches,function(Q){return[Q.triples]}))},dump:function(Q){var R=D.map(this.matches,function(S){return S.triples});Q=D.extend({namespaces:this.databank.namespaces,base:this.databank.base},Q||{});return D.rdf.dump(R,Q)},get:function(Q){return(Q===undefined)?D.makeArray(this):this[Q]},each:function(Q){D.each(this.matches,function(S,R){Q.call(R.bindings,S,R.bindings,R.triples)});return this},map:function(Q){return D(D.map(this.matches,function(R,S){return Q.call(R.bindings,S,R.bindings,R.triples)}))},jquery:function(){return D(this)}};D.rdf.fn.init.prototype=D.rdf.fn;D.rdf.gleaners=[];D.rdf.parsers={};D.rdf.dump=function(X,Q){var T=D.extend({},D.rdf.dump.defaults,Q||{}),V=T.format,S=T.serialize,U,W,R;W=D.rdf.parsers[V];if(W===undefined){R=[];for(p in D.rdf.parsers){R.push(p)}throw"Unrecognised dump format: "+V+". Expected one of "+R.join(", ")}U=W.dump(X,T);return S?W.serialize(U):U};D.rdf.dump.defaults={format:"application/json",serialize:false,indent:false,namespaces:{}};D.fn.rdf=function(R){var Q=[],R=R||function(){return this};if(D(this)[0]&&D(this)[0].nodeType===9){return D(this).children("*").rdf(R)}else{if(D(this).length>0){Q=D(this).map(function(S,T){return D.map(D.rdf.gleaners,function(U){return U.call(D(T),{callback:R})})});return D.rdf({triples:Q,namespaces:D(this).xmlns()})}else{return D.rdf()}}};D.extend(D.expr[":"],{about:function(R,T,Q){var S=D(R),V=Q[3]?S.safeCurie(Q[3]):null,U=false;D.each(D.rdf.gleaners,function(W,X){U=X.call(S,{about:V});if(U){return null}});return U},type:function(R,T,Q){var S=D(R),U=Q[3]?S.curie(Q[3]):null,V=false;D.each(D.rdf.gleaners,function(W,X){if(X.call(S,{type:U})){V=true;return null}});return V}});D.rdf.databank=function(R,Q){return new D.rdf.databank.fn.init(R,Q)};D.rdf.databank.fn=D.rdf.databank.prototype={init:function(S,Q){var R;S=S||[];Q=Q||{};this.id=G();H[this.id]=this;if(Q.union===undefined){this.queries={};this.tripleStore=[];this.subjectIndex={};this.propertyIndex={};this.objectIndex={};this.baseURI=Q.base||D.uri.base();this.namespaces=D.extend({},Q.namespaces||{});for(R=0;R<S.length;R+=1){this.add(S[R])}}else{this.union=Q.union}return this},base:function(Q){if(this.union===undefined){if(Q===undefined){return this.baseURI}else{this.baseURI=Q;return this}}else{if(Q===undefined){return this.union[0].base()}else{D.each(this.union,function(S,R){R.base(Q)});return this}}},prefix:function(S,Q){var R={};if(this.union===undefined){if(S===undefined){return this.namespaces}else{if(Q===undefined){return this.namespaces[S]}else{this.namespaces[S]=Q;return this}}}else{if(Q===undefined){D.each(this.union,function(U,T){D.extend(R,T.prefix())});if(S===undefined){return R}else{return R[S]}}else{D.each(this.union,function(U,T){T.prefix(S,Q)});return this}}},add:function(W,R){var U=(R&&R.base)||this.base(),T=D.extend({},this.prefix(),(R&&R.namespaces)||{}),V=(R&&R.depth)||D.rdf.databank.defaults.depth,S=(R&&R.proxy)||D.rdf.databank.defaults.proxy,Q;if(W===this){return this}else{if(W.subjectIndex!==undefined){if(this.union===undefined){Q=D.rdf.databank(undefined,{union:[this,W]});return Q}else{this.union.push(W);return this}}else{if(typeof W==="string"){W=D.rdf.triple(W,{namespaces:T,base:U,source:W})}if(this.union===undefined){if(this.subjectIndex[W.subject]===undefined){this.subjectIndex[W.subject]=[];if(V>0&&W.subject.type==="uri"){this.load(W.subject.value,{depth:V-1,proxy:S})}}if(this.propertyIndex[W.property]===undefined){this.propertyIndex[W.property]=[];if(V>0){this.load(W.property.value,{depth:V-1,proxy:S})}}if(D.inArray(W,this.subjectIndex[W.subject])===-1){this.tripleStore.push(W);this.subjectIndex[W.subject].push(W);this.propertyIndex[W.property].push(W);if(W.object.type==="uri"||W.object.type==="bnode"){if(this.objectIndex[W.object]===undefined){this.objectIndex[W.object]=[];if(V>0&&W.object.type==="uri"){this.load(W.object.value,{depth:V-1,proxy:S})}}this.objectIndex[W.object].push(W)}e(this,W)}}else{D.each(this.union,function(Y,X){X.add(W)})}return this}}},remove:function(W,T){var V=(T&&T.base)||this.base(),U=D.extend({},this.prefix(),(T&&T.namespaces)||{}),X,R,Q,S;if(typeof W==="string"){W=D.rdf.triple(W,{namespaces:U,base:V,source:W})}this.tripleStore.splice(D.inArray(W,this.tripleStore),1);X=this.subjectIndex[W.subject];if(X!==undefined){X.splice(D.inArray(W,X),1)}R=this.propertyIndex[W.property];if(R!==undefined){R.splice(D.inArray(W,R),1)}if(W.object.type==="uri"||W.object.type==="bnode"){Q=this.objectIndex[W.object];if(Q!==undefined){Q.splice(D.inArray(W,Q),1)}}r(this,W);return this},except:function(R){var Q=R.subjectIndex,S=[];D.each(this.subjectIndex,function(U,V){var T=Q[U];if(T===undefined){S=S.concat(V)}else{D.each(V,function(X,W){if(D.inArray(W,T)===-1){S.push(W)}})}});return D.rdf.databank(S)},triples:function(){var Q,R=[];if(this.union===undefined){R=this.tripleStore}else{D.each(this.union,function(T,S){R=R.concat(S.triples().get())});R=b(R)}return D(R)},size:function(){return this.triples().length},describe:function(T){var R,S,Q,V={},U=[];while(T.length>0){S=T.pop();if(V[S]===undefined){if(S.value===undefined){S=D.rdf.resource(S)}if(this.subjectIndex[S]!==undefined){for(R=0;R<this.subjectIndex[S].length;R+=1){Q=this.subjectIndex[S][R];U.push(Q);if(Q.object.type==="bnode"){T.push(Q.object)}}}if(this.objectIndex[S]!==undefined){for(R=0;R<this.objectIndex[S].length;R+=1){Q=this.objectIndex[S][R];U.push(Q);if(Q.subject.type==="bnode"){T.push(Q.subject)}}}V[S]=true}}return b(U)},dump:function(Q){Q=D.extend({namespaces:this.namespaces,base:this.base},Q||{});return D.rdf.dump(this.triples(),Q)},load:function(W,Q){var X,ad,S,aa,R,T,ab=(Q&&Q.format),U=(Q&&Q.async)||D.rdf.databank.defaults.async,ac=(Q&&Q.success)||D.rdf.databank.defaults.success,Z=(Q&&Q.error)||D.rdf.databank.defaults.error,Y=(Q&&Q.proxy)||D.rdf.databank.defaults.proxy,V=(Q&&Q.depth)||D.rdf.databank.defaults.depth;S=(typeof W==="string"&&W.substring(1,7)==="http://")?D.uri(W):W;if(S.scheme){if(!k(this,S,{success:ac,error:Z})){aa='<script type="text/javascript" src="'+Y+"?id="+this.id+"&amp;depth="+V+"&amp;url="+encodeURIComponent(S.resolve("").toString())+'"><\/script>';if(U){setTimeout("$('head').append('"+aa+"')",0)}else{D("head").append(aa)}}return this}else{if(ab===undefined){if(typeof W==="string"){if(W.substring(0,1)==="{"){ab="application/json"}else{if(W.substring(0,14)==="<!DOCTYPE html"||W.substring(0,5)==="<html"){ab="application/xhtml+xml"}else{if(W.substring(0,5)==="<?xml"||W.substring(0,8)==="<rdf:RDF"){ab="application/rdf+xml"}else{ab="text/turtle"}}}}else{if(W.documentElement||W.ownerDocument){T=W.documentElement?W.documentElement:W.ownerDocument.documentElement;if(T.nodeName==="html"){ab="application/xhtml+xml"}else{ab="application/rdf+xml"}}else{ab="application/json"}}}R=D.rdf.parsers[ab];if(typeof W==="string"){W=R.parse(W)}ad=R.triples(W);for(X=0;X<ad.length;X+=1){this.add(ad[X],Q)}return this}},toString:function(){return"[Databank with "+this.size()+" triples]"}};D.rdf.databank.fn.init.prototype=D.rdf.databank.fn;D.rdf.databank.defaults={parse:false,async:true,success:null,error:null,depth:0,proxy:"http://www.jenitennison.com/rdfquery/proxy.php"};D.rdf.databank.load=function(T,Q,S,R){if(S!==undefined){H[T].load(S,R)}A(H[T],Q,(S===undefined)?"error":"success",R)};D.rdf.pattern=function(U,W,T,S){var V,Q,R;if(T===undefined){S=W||{};Q=D.trim(U).match(g);if(Q.length===3||(Q.length===4&&Q[3]===".")){U=Q[0];W=Q[1];T=Q[2]}else{throw"Bad Pattern: Couldn't parse string "+U}R=(S.optional===undefined)?D.rdf.pattern.defaults.optional:S.optional}if(q[U]&&q[U][W]&&q[U][W][T]&&q[U][W][T][R]){return q[U][W][T][R]}V=new D.rdf.pattern.fn.init(U,W,T,S);if(q[V.subject]&&q[V.subject][V.property]&&q[V.subject][V.property][V.object]&&q[V.subject][V.property][V.object][V.optional]){return q[V.subject][V.property][V.object][V.optional]}else{if(q[V.subject]===undefined){q[V.subject]={}}if(q[V.subject][V.property]===undefined){q[V.subject][V.property]={}}if(q[V.subject][V.property][V.object]===undefined){q[V.subject][V.property][V.object]={}}q[V.subject][V.property][V.object][V.optional]=V;return V}};D.rdf.pattern.fn=D.rdf.pattern.prototype={init:function(R,T,U,Q){var S=D.extend({},D.rdf.pattern.defaults,Q);this.subject=R.toString().substring(0,1)==="?"?R:j(R,S);this.property=T.toString().substring(0,1)==="?"?T:L(T,S);this.object=U.toString().substring(0,1)==="?"?U:I(U,S);this.optional=S.optional;return this},fill:function(T){var Q=this.subject,R=this.property,S=this.object;if(typeof Q==="string"&&T[Q.substring(1)]){Q=T[Q.substring(1)]}if(typeof R==="string"&&T[R.substring(1)]){R=T[R.substring(1)]}if(typeof S==="string"&&T[S.substring(1)]){S=T[S.substring(1)]}return D.rdf.pattern(Q,R,S,{optional:this.optional})},exec:function(R){var Q={};Q=a(R.subject,this.subject,Q);if(Q===null){return null}Q=a(R.property,this.property,Q);if(Q===null){return null}Q=a(R.object,this.object,Q);return Q},isFixed:function(){return typeof this.subject!=="string"&&typeof this.property!=="string"&&typeof this.object!=="string"},triple:function(R){var Q=this;if(!this.isFixed()){Q=this.fill(R)}if(Q.isFixed()){return D.rdf.triple(Q.subject,Q.property,Q.object,{source:this.toString()})}else{return null}},toString:function(){return this.subject+" "+this.property+" "+this.object}};D.rdf.pattern.fn.init.prototype=D.rdf.pattern.fn;D.rdf.pattern.defaults={base:D.uri.base(),namespaces:{},optional:false};D.rdf.triple=function(T,V,S,R){var W,U,Q;if(S===undefined){R=V;Q=D.trim(T).match(g);if(Q.length===3||(Q.length===4&&Q[3]===".")){T=Q[0];V=Q[1];S=Q[2]}else{throw"Bad Triple: Couldn't parse string "+T}}U=(R&&R.graph)||"";if(C[U]&&C[U][T]&&C[U][T][V]&&C[U][T][V][S]){return C[U][T][V][S]}W=new D.rdf.triple.fn.init(T,V,S,R);U=W.graph||"";if(C[U]&&C[U][W.subject]&&C[U][W.subject][W.property]&&C[U][W.subject][W.property][W.object]){return C[U][W.subject][W.property][W.object]}else{if(C[U]===undefined){C[U]={}}if(C[U][W.subject]===undefined){C[U][W.subject]={}}if(C[U][W.subject][W.property]===undefined){C[U][W.subject][W.property]={}}C[U][W.subject][W.property][W.object]=W;return W}};D.rdf.triple.fn=D.rdf.triple.prototype={init:function(R,T,U,Q){var S;S=D.extend({},D.rdf.triple.defaults,Q);this.subject=j(R,S);this.property=L(T,S);this.object=I(U,S);this.graph=S.graph===undefined?undefined:j(S.graph,S);this.source=S.source;return this},isFixed:function(){return true},triple:function(Q){return this},dump:function(){var S={},Q=this.subject.value.toString(),R=this.property.value.toString();S[Q]={};S[Q][R]=this.object.dump();return S},toString:function(){return this.subject+" "+this.property+" "+this.object+" ."}};D.rdf.triple.fn.init.prototype=D.rdf.triple.fn;D.rdf.triple.defaults={base:D.uri.base(),source:[document],namespaces:{}};D.rdf.resource=function(S,Q){var R;if(f[S]){return f[S]}R=new D.rdf.resource.fn.init(S,Q);if(f[R]){return f[R]}else{f[R]=R;return R}};D.rdf.resource.fn=D.rdf.resource.prototype={type:"uri",value:undefined,init:function(V,R){var Q,U,T,S;if(typeof V==="string"){Q=y.exec(V);S=D.extend({},D.rdf.resource.defaults,R);if(Q!==null){this.value=D.uri.resolve(Q[1].replace(/\\>/g,">"),S.base)}else{if(V.substring(0,1)===":"){T=S.namespaces[""];if(T===undefined){throw"Malformed Resource: No namespace binding for default namespace in "+V}else{this.value=D.uri.resolve(T+V.substring(1))}}else{if(V.substring(V.length-1)===":"){U=V.substring(0,V.length-1);T=S.namespaces[U];if(T===undefined){throw"Malformed Resource: No namespace binding for prefix "+U+" in "+V}else{this.value=D.uri.resolve(T)}}else{try{this.value=D.curie(V,{namespaces:S.namespaces})}catch(W){throw"Malformed Resource: Bad format for resource "+W}}}}}else{this.value=V}return this},dump:function(){return{type:"uri",value:this.value.toString()}},toString:function(){return"<"+this.value+">"}};D.rdf.resource.fn.init.prototype=D.rdf.resource.fn;D.rdf.resource.defaults={base:D.uri.base(),namespaces:{}};D.rdf.type=D.rdf.resource("<"+u+"type>");D.rdf.label=D.rdf.resource("<"+t+"label>");D.rdf.first=D.rdf.resource("<"+u+"first>");D.rdf.rest=D.rdf.resource("<"+u+"rest>");D.rdf.nil=D.rdf.resource("<"+u+"nil>");D.rdf.subject=D.rdf.resource("<"+u+"subject>");D.rdf.property=D.rdf.resource("<"+u+"property>");D.rdf.object=D.rdf.resource("<"+u+"object>");D.rdf.blank=function(Q){var R;if(c[Q]){return c[Q]}R=new D.rdf.blank.fn.init(Q);if(c[R]){return c[R]}else{c[R]=R;return R}};D.rdf.blank.fn=D.rdf.blank.prototype={type:"bnode",value:undefined,id:undefined,init:function(Q){if(Q==="[]"){this.id=i();this.value="_:"+this.id}else{if(Q.substring(0,2)==="_:"){this.id=Q.substring(2);this.value=Q}else{throw"Malformed Blank Node: "+Q+" is not a legal format for a blank node"}}return this},dump:function(){return{type:"bnode",value:this.value}},toString:function(){return this.value}};D.rdf.blank.fn.init.prototype=D.rdf.blank.fn;D.rdf.literal=function(S,Q){var R;if(s[S]){return s[S]}R=new D.rdf.literal.fn.init(S,Q);if(s[R]){return s[R]}else{s[R]=R;return R}};D.rdf.literal.fn=D.rdf.literal.prototype={type:"literal",value:undefined,lang:undefined,datatype:undefined,init:function(U,R){var Q,S,T=D.extend({},D.rdf.literal.defaults,R);S=D.safeCurie(T.datatype,{namespaces:T.namespaces});if(T.lang!==undefined&&T.datatype!==undefined&&S.toString()!==(u+"XMLLiteral")){throw"Malformed Literal: Cannot define both a language and a datatype for a literal ("+U+")"}if(T.datatype!==undefined){S=D.safeCurie(T.datatype,{namespaces:T.namespaces});D.extend(this,D.typedValue(U.toString(),S));if(S.toString()===u+"XMLLiteral"){this.lang=T.lang}}else{if(T.lang!==undefined){this.value=U.toString();this.lang=T.lang}else{if(typeof U==="boolean"){D.extend(this,D.typedValue(U.toString(),h+"boolean"))}else{if(typeof U==="number"){D.extend(this,D.typedValue(U.toString(),h+"double"))}else{if(U==="true"||U==="false"){D.extend(this,D.typedValue(U,h+"boolean"))}else{if(D.typedValue.valid(U,h+"integer")){D.extend(this,D.typedValue(U,h+"integer"))}else{if(D.typedValue.valid(U,h+"decimal")){D.extend(this,D.typedValue(U,h+"decimal"))}else{if(D.typedValue.valid(U,h+"double")&&!/^\s*([\-\+]?INF|NaN)\s*$/.test(U)){D.extend(this,D.typedValue(U,h+"double"))}else{Q=N.exec(U);if(Q!==null){this.value=(Q[2]||Q[4]).replace(/\\"/g,'"').replace(/\\n/g,"\n").replace(/\\t/g,"\t").replace(/\\r/g,"\r");if(Q[9]){S=D.rdf.resource(Q[9],T);D.extend(this,D.typedValue(this.value,S.value))}else{if(Q[7]){this.lang=Q[7]}}}else{throw"Malformed Literal: Couldn't recognise the value "+U}}}}}}}}}return this},dump:function(){var Q={type:"literal",value:this.value.toString()};if(this.lang!==undefined){Q.lang=this.lang}else{if(this.datatype!==undefined){Q.datatype=this.datatype.toString()}}return Q},toString:function(){var Q='"'+this.value+'"';if(this.lang!==undefined){Q+="@"+this.lang}else{if(this.datatype!==undefined){Q+="^^<"+this.datatype+">"}}return Q}};D.rdf.literal.fn.init.prototype=D.rdf.literal.fn;D.rdf.literal.defaults={base:D.uri.base(),namespaces:{},datatype:undefined,lang:undefined}})(jQuery);(function(a){a.rdf.parsers["application/json"]={parse:a.secureEvalJSON,serialize:a.toJSON,triples:function(f){var l,h,c,j,d,e,g,b,k=[];for(l in f){h=(l.substring(0,2)==="_:")?a.rdf.blank(l):a.rdf.resource("<"+l+">");for(c in f[l]){j=a.rdf.resource("<"+c+">");for(g=0;g<f[l][c].length;g+=1){d=f[l][c][g];if(d.type==="uri"){e=a.rdf.resource("<"+d.value+">")}else{if(d.type==="bnode"){e=a.rdf.blank(d.value)}else{if(d.datatype!==undefined){e=a.rdf.literal(d.value,{datatype:d.datatype})}else{b={};if(d.lang!==undefined){b.lang=d.lang}e=a.rdf.literal('"'+d.value+'"',b)}}}k.push(a.rdf.triple(h,j,e))}}}return k},dump:function(h){var g={},c,b,d,f;for(c=0;c<h.length;c+=1){b=h[c];d=b.subject.value.toString();f=b.property.value.toString();if(g[d]===undefined){g[d]={}}if(g[d][f]===undefined){g[d][f]=[]}g[d][f].push(b.object.dump())}return g}}})(jQuery);(function(e){var b="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n=function(u,t,s,w){var x=u.ownerDocument,r;if(t!==undefined&&t!==null){if(x.createAttributeNS){r=x.createAttributeNS(t,s);r.nodeValue=w;u.attributes.setNamedItemNS(r)}else{r=x.createNode(2,s,t);r.nodeValue=w;u.attributes.setNamedItem(r)}}else{r=x.createAttribute(s);r.nodeValue=w;u.attributes.setNamedItem(r)}return u},o=function(s,r,t){if(r==="http://www.w3.org/XML/1998/namespace"||r==="http://www.w3.org/2000/xmlns/"){}else{if(t){n(s,"http://www.w3.org/2000/xmlns/","xmlns:"+t,r)}else{n(s,undefined,"xmlns",r)}}return s},h=function(t,r){var w,x="",u,s=false;if(t!==undefined&&t!==null){if(/:/.test(r)){u=/([^:]+):/.exec(r)[1]}s=true}if(document.implementation&&document.implementation.createDocument){w=document.implementation.createDocument(t,r,null);if(s){o(w.documentElement,t,u)}return w}else{w=new ActiveXObject("Microsoft.XMLDOM");w.async="false";if(u===undefined){x=' xmlns="'+t+'"'}else{x=" xmlns:"+u+'="'+t+'"'}w.loadXML("<"+r+x+"/>");return w}},q=function(u,t,s,r){var x=u.ownerDocument,w;if(t!==undefined&&t!==null){w=x.createElementNS?x.createElementNS(t,s):x.createNode(1,s,t)}else{w=x.createElement(s)}if(r!==-1){d(u,"\n");if(r===0){d(u,"\n")}else{d(u,"  ")}}u.appendChild(w);return w},d=function(s,w){var u=s.ownerDocument,r;r=u.createTextNode(w);s.appendChild(r);return s},m=function(t,r){var y,w,s,x;try{w=new ActiveXObject("Microsoft.XMLDOM");w.async="false";w.loadXML("<temp>"+r+"</temp>")}catch(u){y=new DOMParser();w=y.parseFromString("<temp>"+r+"</temp>","text/xml")}for(s=0;s<w.documentElement.childNodes.length;s+=1){t.appendChild(w.documentElement.childNodes[s].cloneNode(true))}return t},g=function(H,J){var F=h(b,"rdf:RDF"),A=e.rdf.parsers["application/json"].dump(H),t=J.namespaces||{},w=J.indent||false,u,I,B,r,C,y,G,x,E,D,z;for(u in t){o(F.documentElement,t[u],u)}for(I in A){if(A[I][e.rdf.type.value]!==undefined){x=/(.+[#\/])([^#\/]+)/.exec(A[I][e.rdf.type.value][0].value);D=x[1];E=x[2];for(u in t){if(t[u].toString()===D){z=u;break}}B=q(F.documentElement,D,z+":"+E,w?0:-1)}else{B=q(F.documentElement,b,"rdf:Description",w?0:-1)}if(/^_:/.test(I)){n(B,b,"rdf:nodeID",I.substring(2))}else{n(B,b,"rdf:about",I)}for(r in A[I]){if(r!==e.rdf.type.value.toString()||A[I][r].length>1){x=/(.+[#\/])([^#\/]+)/.exec(r);D=x[1];E=x[2];for(u in t){if(t[u].toString()===D){z=u;break}}for(y=(r===e.rdf.type.value.toString()?1:0);y<A[I][r].length;y+=1){G=A[I][r][y];C=q(B,D,z+":"+E,w?1:-1);if(G.type==="uri"){n(C,b,"rdf:resource",G.value)}else{if(G.type==="literal"){if(G.datatype!==undefined){if(G.datatype==="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"){n(C,b,"rdf:parseType","Literal");if(w){d(C,"\n    ")}m(C,G.value);if(w){d(C,"\n  ")}}else{n(C,b,"rdf:datatype",G.datatype);d(C,G.value)}}else{if(G.lang!==undefined){n(C,"http://www.w3.org/XML/1998/namespace","xml:lang",G.lang);d(C,G.value)}else{d(C,G.value)}}}else{n(C,b,"rdf:nodeID",G.value.substring(2))}}}if(w){d(B,"\n")}}}}if(w){d(F.documentElement,"\n\n")}return F},a=function(r){switch(r){case"http://www.w3.org/1999/02/22-rdf-syntax-ns":return"rdf";case"http://www.w3.org/XML/1998/namespace":return"xml";case"http://www.w3.org/2000/xmlns/":return"xmlns";default:throw ("No default prefix mapped for namespace "+r)}},k=function(t,s,r){var w;if(t.hasAttributeNS){return t.hasAttributeNS(s,r)}else{try{w=/:/.test(r)?/:(.+)$/.exec(r)[1]:r;return t.attributes.getQualifiedItem(w,s)!==null}catch(u){return t.getAttribute(a(s)+":"+r)!==null}}},j=function(t,s,r){var w;if(t.getAttributeNS){return t.getAttributeNS(s,r)}else{try{w=/:/.test(r)?/:(.+)$/.exec(r)[1]:r;return t.attributes.getQualifiedItem(w,s).nodeValue}catch(u){return t.getAttribute(a(s)+":"+r)}}},l=function(r){return r.localName||r.baseName},i=function(u,w){var t,r;if(k(u,b,"about")){t=j(u,b,"about");r=e.rdf.resource("<"+t+">",{base:w})}else{if(k(u,b,"ID")){t=j(u,b,"ID");r=e.rdf.resource("<#"+t+">",{base:w})}else{if(k(u,b,"nodeID")){t=j(u,b,"nodeID");r=e.rdf.blank("_:"+t)}else{r=e.rdf.blank("[]")}}}return r},f=function(L,t,u,P){var x,A,y,B,M,G,P,F,E,z=1,O,N,I,r=[],w,K,H={},s,C=[];P=j(L,"http://www.w3.org/XML/1998/namespace","lang")||P;u=j(L,"http://www.w3.org/XML/1998/namespace","base")||u;if(P!==null&&P!==undefined&&P!==""){H={lang:P}}x=i(L,u);if(t&&(L.namespaceURI!==b||l(L)!=="Description")){y=e.rdf.type;M=e.rdf.resource("<"+L.namespaceURI+l(L)+">");C.push(e.rdf.triple(x,y,M))}for(F=0;F<L.attributes.length;F+=1){A=L.attributes.item(F);if(A.namespaceURI!==undefined&&A.namespaceURI!=="http://www.w3.org/2000/xmlns/"&&A.namespaceURI!=="http://www.w3.org/XML/1998/namespace"&&A.prefix!=="xmlns"&&A.prefix!=="xml"){if(A.namespaceURI!==b){y=e.rdf.resource("<"+A.namespaceURI+l(A)+">");M=e.rdf.literal(H.lang?A.nodeValue:'"'+A.nodeValue.replace(/"/g,'\\"')+'"',H);C.push(e.rdf.triple(x,y,M))}else{if(l(A)==="type"){y=e.rdf.type;M=e.rdf.resource("<"+A.nodeValue+">",{base:u});C.push(e.rdf.triple(x,y,M))}}}}var D=P;for(F=0;F<L.childNodes.length;F+=1){A=L.childNodes[F];if(A.nodeType===1){if(A.namespaceURI===b&&l(A)==="li"){y=e.rdf.resource("<"+b+"_"+z+">");z+=1}else{y=e.rdf.resource("<"+A.namespaceURI+l(A)+">")}P=j(A,"http://www.w3.org/XML/1998/namespace","lang")||D;if(P!==null&&P!==undefined&&P!==""){H={lang:P}}else{H={}}if(k(A,b,"resource")){B=j(A,b,"resource");M=e.rdf.resource("<"+B+">",{base:u})}else{if(k(A,b,"nodeID")){B=j(A,b,"nodeID");M=e.rdf.blank("_:"+B)}else{if(k(A,b,"parseType")){w=j(A,b,"parseType");if(w==="Literal"){try{K=new XMLSerializer();B=K.serializeToString(A.getElementsByTagName("*")[0])}catch(J){B="";for(E=0;E<A.childNodes.length;E+=1){B+=A.childNodes[E].xml}}M=e.rdf.literal(B,{datatype:b+"XMLLiteral"})}else{if(w==="Resource"){s=f(A,false,u,P);if(s.length>0){M=s[s.length-1].subject;C=C.concat(s)}else{M=e.rdf.blank("[]")}}else{if(w==="Collection"){if(A.getElementsByTagName("*").length>0){for(E=0;E<A.childNodes.length;E+=1){B=A.childNodes[E];if(B.nodeType===1){r.push(B)}}O=e.rdf.blank("[]");M=O;for(E=0;E<r.length;E+=1){B=r[E];s=f(B,true,u,P);if(s.length>0){I=s[s.length-1].subject;C=C.concat(s)}else{I=i(B)}C.push(e.rdf.triple(O,e.rdf.first,I));if(E===r.length-1){C.push(e.rdf.triple(O,e.rdf.rest,e.rdf.nil))}else{N=e.rdf.blank("[]");C.push(e.rdf.triple(O,e.rdf.rest,N));O=N}}}else{M=e.rdf.nil}}}}}else{if(k(A,b,"datatype")){B=A.childNodes[0]?A.childNodes[0].nodeValue:"";M=e.rdf.literal(B,{datatype:j(A,b,"datatype")})}else{if(A.getElementsByTagName("*").length>0){for(E=0;E<A.childNodes.length;E+=1){B=A.childNodes[E];if(B.nodeType===1){s=f(B,true,u,P);if(s.length>0){M=s[s.length-1].subject;C=C.concat(s)}else{M=i(B)}}}}else{if(A.childNodes.length>0){B=A.childNodes[0].nodeValue;M=e.rdf.literal(H.lang?B:'"'+B.replace(/"/g,'\\"')+'"',H)}else{s=f(A,false,u,P);if(s.length>0){M=s[s.length-1].subject;C=C.concat(s)}else{M=e.rdf.blank("[]")}}}}}}}C.push(e.rdf.triple(x,y,M));if(k(A,b,"ID")){G=e.rdf.resource("<#"+j(A,b,"ID")+">",{base:u});C.push(e.rdf.triple(G,e.rdf.subject,x));C.push(e.rdf.triple(G,e.rdf.property,y));C.push(e.rdf.triple(G,e.rdf.object,M))}}}return C},c=function(s){var r,u,t,w=[];if(s.documentElement.namespaceURI===b&&l(s.documentElement)==="RDF"){u=j(s.documentElement,"http://www.w3.org/XML/1998/namespace","lang");base=j(s.documentElement,"http://www.w3.org/XML/1998/namespace","base")||e.uri.base();w=e.map(s.documentElement.childNodes,function(x){if(x.nodeType===1){return f(x,true,base,u)}else{return null}})}else{w=f(s.documentElement,true)}return w};e.rdf.parsers["application/rdf+xml"]={parse:function(r){var t;try{t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(r)}catch(s){var u=new DOMParser();t=u.parseFromString(r,"text/xml")}return t},serialize:function(r){if(r.xml){return r.xml.replace(/\s+$/,"")}else{serializer=new XMLSerializer();return serializer.serializeToString(r)}},triples:c,dump:g}})(jQuery);